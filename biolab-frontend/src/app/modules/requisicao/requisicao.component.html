<mat-card class="example-card">
  <mat-toolbar class="background-color">
    <mat-icon class="mat-18">description</mat-icon>
    <span>Requisição</span>
  </mat-toolbar>
  <br />
  <mat-card-content>
    <mat-card-title>Pesquisar cliente</mat-card-title>
    <br />
    <form [formGroup]="formPesq">
      <mat-form-field appearance="outline">
        <mat-label>Pesquisar por CPF</mat-label>
        <input matInput placeholder="Digite o CPF" formControlName="cpf" mask="000.000.000-00" />
      </mat-form-field>
      <button mat-icon-button (click)="pesquisar()">
        <mat-icon>search</mat-icon>
      </button>
    </form>
    <mat-divider></mat-divider>
  </mat-card-content>

  <mat-card-content *ngIf="visibleForm">
    <mat-card-title>Dados do paciente</mat-card-title>
    <br />
    <div>
      <h3>
        <span><strong>Nome: </strong> {{pessoa.nome}}</span>
        | <span><strong>CPF: </strong> {{pessoa.cpf}}</span>
        | <span><strong>Telefone: </strong> {{pessoa.telefone}}</span>
      </h3>
    </div>

    <form [formGroup]="formRequisicao">
      <div mat-dialog-content>
        <mat-form-field style="width: 30%; margin-inline-end: 8px;" appearance="outline">
          <mat-label>Nome médico</mat-label>
          <input matInput placeholder="Digite o nome do médico solicitante" formControlName="nomeMedico">
        </mat-form-field>
        <mat-form-field style="width: 15%; margin-inline-end: 8px;" appearance="outline">
          <mat-label>CRM</mat-label>
          <input matInput placeholder="Digite o CRM do médico" formControlName="crmMedico">
        </mat-form-field>
        <mat-form-field style="width: 15%; margin-inline-end: 8px;" appearance="outline">
          <mat-label>Forma de pagamento</mat-label>
          <mat-select formControlName="formaPagamento">
            <mat-option value="A_VISTA">A VISTA</mat-option>
            <mat-option value="CARTAO_CREDITO">CREDITO</mat-option>
            <mat-option value="CARTAO_DEBITO">DEBITO</mat-option>
          </mat-select>
        </mat-form-field>
        <input type="hidden" formControlName="valorTotalRequisicao" [value]="valor">
      </div>

      <mat-divider></mat-divider>
      <section class="example-section">
        <h4>Selecione os exemes:</h4>
        <div *ngFor="let e of exames">
          <mat-checkbox formArrayName="exames">
            {{e.nome}} - Valor: {{e.valor}}
          </mat-checkbox>
        </div>
      </section>



      <!-- <section class="example-section" [formGroup]="toppings">
        <h4>You chose:</h4>
        {{toppings.value | json}}
      </section> -->
    </form>
    <br>
    <div>
      <h3><strong>Valor total dos exames:</strong> {{valor}}</h3>
    </div>
    <div class="example-button-row">
      <button mat-flat-button class="background-color" (click)="onSubmit()">Salvar requisição</button>
    </div>
    <br>
  </mat-card-content>
